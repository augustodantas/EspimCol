(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{CDLC:function(t,e,i){"use strict";i.r(e),i.d(e,"LevelsModule",(function(){return H}));var n=i("ofXK"),r=i("j1ZV"),o=i("Awto"),a=i("tyNb"),s=i("0rl9"),c=i("mrSG"),l=i("3Pt+"),b=i("2WpN"),d=i("nWBu"),u=i("5dVO"),m=i("eGxY"),f=i("P9qh"),p=i("fXoL"),v=i("qT8p"),h=i("z1GS"),g=i("o8Qb"),R=i("n8HC"),_=["formElement"];function Q(t,e){1&t&&(p.Rb(0,"h1",24),p.Dc(1,"private.levels.add.title"),p.Qb())}function L(t,e){1&t&&(p.Rb(0,"h1",24),p.Dc(1,"private.levels.add.titleEdit"),p.Qb())}function y(t,e){if(1&t&&p.Mb(0,"input-validations",25),2&t){var i=p.cc();p.ic("errors",i.form.controls.name.errors)}}function x(t,e){if(1&t&&p.Mb(0,"input-validations",26),2&t){var i=p.cc();p.ic("errors",i.form.controls.min_points.errors)}}function S(t,e){if(1&t&&p.Mb(0,"input-validations",27),2&t){var i=p.cc();p.ic("errors",i.form.controls.max_points.errors)}}var w=function(){function t(t,e,i,n,r,o){this._daoService=t,this._toastr=e,this._formBuilder=i,this._loaderService=n,this.route=r,this.activeRoute=o,this.url=d.i,this.editing=!1,this.loading=!0,this.id=""}return t.prototype.ngOnInit=function(){this.id=this.activeRoute.snapshot.params.id,this.form=this._formBuilder.group({name:this._formBuilder.control("",[l.v.required]),min_points:this._formBuilder.control("",[l.v.required]),max_points:this._formBuilder.control("",[l.v.required])}),this.id?this.fetchData(this.id):this.loading=!1},t.prototype.fetchData=function(t){var e=this;this._loaderService.show(),this._daoService.getObject(this.url,t).pipe(Object(b.a)((function(){return e._loaderService.hide()}))).subscribe((function(t){e.form.patchValue(Object(c.a)({},t.data))}))},t.prototype.save=function(t){var e=this;this.form.markAllAsTouched(),this.form.valid&&(this._loaderService.show(),this.sendRequest().pipe(Object(b.a)((function(){return e._loaderService.hide()}))).subscribe((function(t){t.error?m.a.setErrorsBackend(e.form,t):(e._toastr.success(t.message),e.route.navigate(["/private/levels/list"]))}),(function(t){return m.a.setErrorsBackend(e.form,t.data)})))},t.prototype.sendRequest=function(){var t=Object(c.a)({},this.form.value);return this.id?this._daoService.putObject(this.url+this.id,t):this._daoService.postObject(this.url,t)},t.\u0275fac=function(e){return new(e||t)(p.Lb(f.a),p.Lb(v.b),p.Lb(l.d),p.Lb(u.a),p.Lb(a.c),p.Lb(a.a))},t.\u0275cmp=p.Fb({type:t,selectors:[["esm-levels-add"]],viewQuery:function(t,e){var i;1&t&&p.Jc(_,!0),2&t&&p.qc(i=p.Zb())&&(e.formElement=i.first)},decls:41,vars:15,consts:[[1,"mx-auto","mt-4","card","card-lg","w-main","container-fluid"],[1,"row"],[1,"p-0","mx-auto","bg-white","rounded","col-12","p-xl-2"],[1,"container-fluid"],[1,"col-12"],["class","h4","translate","",4,"ngIf"],["focusInvalidInput","",3,"formGroup","ngSubmit"],["formElement",""],[1,"col-6","form-group"],[1,"form-label-group"],["id","name","name","name","type","text","formControlName","name",1,"form-control","border-bottom",3,"placeholder"],["for","text","translate",""],["label","Nome",3,"errors",4,"ngIf"],[1,"col-3","form-group"],["id","min_points","name","min_points","type","number","formControlName","min_points",1,"form-control","border-bottom",3,"placeholder"],["for","min_points","translate",""],["label","M\xednimo de pontos",3,"errors",4,"ngIf"],["id","max_points","name","max_points","type","number","formControlName","max_points",1,"form-control","border-bottom",3,"placeholder"],["for","max_points","translate",""],["label","M\xe1ximo de pontos",3,"errors",4,"ngIf"],[1,"row","justify-content-end"],[1,"col-auto"],["routerLink","/private/levels/list",1,"btn","btn-success","btn-lg","btn-shadow"],["type","submit","name","saveButton","translate","",1,"btn","btn-primary","btn-lg","btn-shadow","min-100"],["translate","",1,"h4"],["label","Nome",3,"errors"],["label","M\xednimo de pontos",3,"errors"],["label","M\xe1ximo de pontos",3,"errors"]],template:function(t,e){1&t&&(p.Rb(0,"div",0),p.Rb(1,"div",1),p.Rb(2,"section",2),p.Rb(3,"div",3),p.Rb(4,"div",1),p.Rb(5,"div",4),p.Bc(6,Q,2,0,"h1",5),p.Bc(7,L,2,0,"h1",5),p.Qb(),p.Qb(),p.Rb(8,"form",6,7),p.Yb("ngSubmit",(function(t){return e.save(t)})),p.Rb(10,"div",1),p.Rb(11,"div",8),p.Rb(12,"div",9),p.Mb(13,"input",10),p.dc(14,"translate"),p.Rb(15,"label",11),p.Dc(16,"private.levels.add.name"),p.Qb(),p.Qb(),p.Bc(17,y,1,1,"input-validations",12),p.Qb(),p.Qb(),p.Rb(18,"div",1),p.Rb(19,"div",13),p.Rb(20,"div",9),p.Mb(21,"input",14),p.dc(22,"translate"),p.Rb(23,"label",15),p.Dc(24,"private.levels.add.minPoints"),p.Qb(),p.Qb(),p.Bc(25,x,1,1,"input-validations",16),p.Qb(),p.Qb(),p.Rb(26,"div",1),p.Rb(27,"div",13),p.Rb(28,"div",9),p.Mb(29,"input",17),p.dc(30,"translate"),p.Rb(31,"label",18),p.Dc(32,"private.levels.add.maxPoints"),p.Qb(),p.Qb(),p.Bc(33,S,1,1,"input-validations",19),p.Qb(),p.Qb(),p.Rb(34,"div",20),p.Rb(35,"div",21),p.Rb(36,"a",22),p.Dc(37,"VOLTAR"),p.Qb(),p.Qb(),p.Rb(38,"div",21),p.Rb(39,"button",23),p.Dc(40,"SALVAR"),p.Qb(),p.Qb(),p.Qb(),p.Qb(),p.Qb(),p.Qb(),p.Qb(),p.Qb()),2&t&&(p.zb(6),p.ic("ngIf",!e.id),p.zb(1),p.ic("ngIf",e.id),p.zb(1),p.ic("formGroup",e.form),p.zb(5),p.jc("placeholder",p.ec(14,9,"private.levels.add.name")),p.zb(4),p.ic("ngIf",e.form.controls.name.invalid&&e.form.controls.name.touched),p.zb(4),p.jc("placeholder",p.ec(22,11,"private.levels.add.minPoints")),p.zb(4),p.ic("ngIf",e.form.controls.min_points.invalid&&e.form.controls.min_points.touched),p.zb(4),p.jc("placeholder",p.ec(30,13,"private.levels.add.maxPoints")),p.zb(4),p.ic("ngIf",e.form.controls.max_points.invalid&&e.form.controls.max_points.touched))},directives:[n.l,l.x,l.l,h.a,l.f,l.b,l.k,l.e,g.b,l.p,a.e,R.a],pipes:[g.e],encapsulation:2}),t}(),I=i("tk/3"),O=i("K9Ia"),k=i("Gi3i"),B=i("ad02"),E=i("15JJ"),j=i("y9qN"),D=i("qSrz"),z=i("ZJS2"),M=i("kGPy"),T=function(){return["/private/levels/add"]};function A(t,e){1&t&&(p.Rb(0,"a",10),p.Dc(1,"private.levels.list.addButton"),p.Qb()),2&t&&p.ic("routerLink",p.kc(1,T))}function C(t,e){1&t&&(p.Rb(0,"div",11),p.Dc(1,"Nenhum level encontrado"),p.Qb())}var P=function(t){return["/private/levels/edit",t]};function V(t,e){if(1&t){var i=p.Sb();p.Rb(0,"td",15),p.Rb(1,"div",16),p.Rb(2,"a",13),p.Mb(3,"i",17),p.Qb(),p.Rb(4,"a",18),p.Rb(5,"i",19),p.Yb("click",(function(){p.tc(i);var t=p.cc().$implicit;return p.cc().deleteItem(t)})),p.Qb(),p.Qb(),p.Qb(),p.Qb()}if(2&t){var n=p.cc().$implicit;p.zb(2),p.ic("routerLink",p.lc(1,P,n.id))}}var q=function(){return["LEVELS_EDIT","LEVELS_DELETE"]};function N(t,e){if(1&t&&(p.Rb(0,"tr"),p.Rb(1,"td",12),p.Rb(2,"a",13),p.Dc(3),p.Qb(),p.Qb(),p.Bc(4,V,6,3,"td",14),p.Qb()),2&t){var i=e.$implicit;p.zb(2),p.ic("routerLink",p.lc(5,P,i.id)),p.zb(1),p.Hc(" ",i.name," - ",i.min_points," at\xe9 ",i.max_points," pontos "),p.zb(1),p.ic("ngxPermissionsOnly",p.kc(7,q))}}function F(t,e){1&t&&(p.Rb(0,"tr",21),p.Rb(1,"td"),p.Mb(2,"div",22),p.Qb(),p.Rb(3,"td",15),p.Mb(4,"div",22),p.Qb(),p.Qb())}var J=function(){return[1,2,3,4,5,6,7,8,9,10]};function G(t,e){1&t&&p.Bc(0,F,5,0,"tr",20),2&t&&p.ic("ngForOf",p.kc(1,J))}var Y=function(){return["LEVELS_ADD"]},Z=[{path:"list",canActivate:[s.a],data:{permissions:{only:["LEVELS_LIST"]}},component:function(){function t(t,e,i,n){var r=this;this.daoService=t,this._loaderService=e,this._swalService=i,this._toastr=n,this.url=d.i,this.loading=!0,this.search=new O.a,this.searchTerm="",this.search.pipe(Object(k.a)(300),Object(B.a)(),Object(E.a)((function(){return r.getLevels()}))).subscribe((function(t){r.loading=!1,r.setLevels(t)}))}return t.prototype.handleChange=function(t,e){void 0===e&&(e=!1),e&&(this.searchTerm=t),this.levels=[],this.loading=!0,this.search.next(t)},t.prototype.ngOnInit=function(){this.search.next("")},t.prototype.getLevels=function(){var t=(new I.f).set("search",this.searchTerm).set("orderBy","created_at").set("sortedBy","desc");return this.daoService.getObjects(this.url,t)},t.prototype.setLevels=function(t){this.levels=t.data},t.prototype.deleteItem=function(t){var e=this;this._swalService.confirmDelete(t.name+" - "+t.min_points+" at\xe9 "+t.max_points+" pontos","level").then((function(i){i.isConfirmed&&(e._loaderService.show(),e.daoService.deleteObject(e.url,t.id.toString()).pipe(Object(b.a)((function(){return e._loaderService.hide()}))).subscribe((function(t){e.handleChange(t),e._toastr.success(t.message)})))}))},t.\u0275fac=function(e){return new(e||t)(p.Lb(f.a),p.Lb(u.a),p.Lb(j.a),p.Lb(v.b))},t.\u0275cmp=p.Fb({type:t,selectors:[["esm-levels-list"]],features:[p.yb([n.e])],decls:15,vars:11,consts:[[1,"px-5","mx-auto","mt-4","mb-5","card","card-lg","w-main"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["translate","",1,"h4"],["class","btn btn-link align-self-end","translate","",3,"routerLink",4,"ngxPermissionsOnly"],[3,"doSearch"],[3,"title","subtitle"],["class","alert alert-info",4,"ngIf"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[3,"ngIf"],["translate","",1,"btn","btn-link","align-self-end",3,"routerLink"],[1,"alert","alert-info"],["scope","row"],[3,"routerLink"],["width","100",4,"ngxPermissionsOnly"],["width","100"],[1,"mx-3","d-flex","align-items-center"],[1,"mr-3","fas","fa-edit","fa-lg","text-primary"],["href","javascript:"],[1,"fas","fa-trash-alt","fa-lg","text-primary",3,"click"],["class","loading",4,"ngFor","ngForOf"],[1,"loading"],[1,"loader-bg"]],template:function(t,e){1&t&&(p.Rb(0,"main",0),p.Rb(1,"div",1),p.Rb(2,"h1",2),p.Dc(3,"private.levels.list.pageTitle"),p.Qb(),p.Bc(4,A,2,2,"a",3),p.Qb(),p.Rb(5,"esm-search",4),p.Yb("doSearch",(function(t){return e.handleChange(t,!0)})),p.Qb(),p.Rb(6,"form"),p.Mb(7,"esm-list-header",5),p.dc(8,"translate"),p.dc(9,"translate"),p.Bc(10,C,2,0,"div",6),p.Rb(11,"table",7),p.Rb(12,"tbody"),p.Bc(13,N,5,8,"tr",8),p.Bc(14,G,1,2,"ng-template",9),p.Qb(),p.Qb(),p.Qb(),p.Qb()),2&t&&(p.zb(4),p.ic("ngxPermissionsOnly",p.kc(10,Y)),p.zb(3),p.ic("title",p.ec(8,6,"private.levels.list.listTitle"))("subtitle",p.ec(9,8,"private.levels.list.totalNumber")),p.zb(3),p.ic("ngIf",!e.loading&&0==e.levels.length),p.zb(3),p.ic("ngForOf",e.levels),p.zb(1),p.ic("ngIf",e.loading))},directives:[g.b,D.a,z.a,l.x,l.l,l.m,M.a,n.l,n.k,a.e],pipes:[g.e],encapsulation:2}),t}()},{path:"add",canActivate:[s.a],data:{permissions:{only:["LEVELS_ADD"]}},component:w},{path:"edit/:id",canActivate:[s.a],data:{permissions:{only:["LEVELS_EDIT"]}},component:w},{path:"**",redirectTo:"/private",pathMatch:"full"}],$=function(){function t(){}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[a.f.forChild(Z)],a.f]}),t}(),H=function(){function t(){}return t.\u0275mod=p.Jb({type:t}),t.\u0275inj=p.Ib({factory:function(e){return new(e||t)},imports:[[o.a,r.a,$,n.c],o.a]}),t}()}}]);
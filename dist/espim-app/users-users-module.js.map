{"version":3,"sources":["./src/app/private/users/add/add.component.ts","./src/app/private/users/add/add.component.html","./src/app/private/users/list/list.component.ts","./src/app/private/users/list/list.component.html","./src/app/private/users/users-routing.module.ts","./src/app/private/users/users.module.ts"],"names":[],"mappings":"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","file":"users-users-module.js","sourcesContent":["import { HttpParams } from '@angular/common/http';\nimport { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Observable } from 'rxjs';\nimport { finalize } from 'rxjs/operators';\nimport { ESPIM_REST_Roles, ESPIM_REST_Users } from 'src/app/app.api';\nimport { LoaderService } from 'src/app/services/loader.service';\nimport { FormUtil } from 'src/app/util/util.form.service';\n\nimport { DAOService } from '../../dao/dao.service';\nimport { Role } from '../../models/role.model';\n\n@Component({\n  selector: 'esm-roles-add',\n  templateUrl: './add.component.html',\n})\nexport class AddComponent implements OnInit {\n  @ViewChild('formElement') formElement: ElementRef;\n\n  url: string = ESPIM_REST_Users;\n  urlRoles: string = ESPIM_REST_Roles;\n  roles: Role[] = [];\n  form: FormGroup;\n  editing: boolean = false;\n  loading: boolean = true;\n  id: string = '';\n\n  constructor(\n    private _daoService: DAOService,\n    private _toastr: ToastrService,\n    private _formBuilder: FormBuilder,\n    private _loaderService: LoaderService,\n    private route: Router,\n    private activeRoute: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.id = this.activeRoute.snapshot.params.id;\n\n    this.form = this._formBuilder.group({\n      name: this._formBuilder.control(null, [Validators.required]),\n      email: this._formBuilder.control(null, [Validators.required]),\n      roles: this._formBuilder.control([], [Validators.required]),\n    });\n\n    this.fetchData(this.id);\n\n    this.getUsers();\n  }\n\n  fetchData(id: string) {\n    this._loaderService.show();\n\n    let params = new HttpParams().set('include', 'roles');\n\n    this._daoService\n      .getObject(this.url, id, params)\n      .pipe(finalize(() => this._loaderService.hide()))\n      .subscribe((response) => {\n        response.data.roles = response.data.roles.map((role) => role.id);\n        this.form.patchValue({ ...response.data });\n      });\n  }\n\n  save(event) {\n    this.form.markAllAsTouched();\n    let valid = true;\n\n    if (this.form.valid && valid) {\n      this._loaderService.show();\n\n      this.sendRequest()\n        .pipe(finalize(() => this._loaderService.hide()))\n        .subscribe(\n          (response) => {\n            if (response.error) {\n              FormUtil.setErrorsBackend(this.form, response);\n            } else {\n              this._toastr.success(response.message);\n              this.route.navigate(['/private/users/list']);\n            }\n          },\n          (resp) => FormUtil.setErrorsBackend(this.form, resp.data)\n        );\n    }\n  }\n\n  sendRequest(): Observable<any> {\n    var dados = { ...this.form.value };\n\n    return this._daoService.putObject(this.url + this.id, dados);\n  }\n\n  getUsers(): void {\n    this._daoService.getObjects(this.urlRoles).subscribe((response) => {\n      this.roles = response.data;\n    });\n  }\n}\n","<div class=\"mx-auto mt-4 card card-lg w-main container-fluid\">\n  <div class=\"row\">\n    <section class=\"p-0 mx-auto bg-white rounded col-12 p-xl-2\">\n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div class=\"col-12\">\n            <h1 class=\"h4\" translate *ngIf=\"!id\">private.users.add.title</h1>\n            <h1 class=\"h4\" translate *ngIf=\"id\">private.users.add.titleEdit</h1>\n          </div>\n        </div>\n\n        <form [formGroup]=\"form\" focusInvalidInput #formElement (ngSubmit)=\"save($event)\">\n          <div class=\"row\">\n            <div class=\"col-6 form-group\">\n              <div class=\"form-label-group\">\n                <input\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"{{ 'private.users.add.name' | translate }}\"\n                  class=\"form-control border-bottom\"\n                  formControlName=\"name\"\n                />\n                <label for=\"text\" translate>private.users.add.name</label>\n              </div>\n              <input-validations\n                *ngIf=\"form.controls['name'].invalid && form.controls['name'].touched\"\n                [errors]=\"form.controls['name'].errors\"\n                label=\"Nome\"\n              >\n              </input-validations>\n            </div>\n          </div>\n\n          <div class=\"row\">\n            <div class=\"col-6 form-group\">\n              <div class=\"form-label-group\">\n                <input\n                  id=\"email\"\n                  name=\"email\"\n                  type=\"text\"\n                  placeholder=\"{{ 'private.users.add.email' | translate }}\"\n                  class=\"form-control border-bottom\"\n                  formControlName=\"email\"\n                />\n                <label for=\"text\" translate>private.users.add.email</label>\n              </div>\n              <input-validations\n                *ngIf=\"form.controls['email'].invalid && form.controls['email'].touched\"\n                [errors]=\"form.controls['email'].errors\"\n                label=\"Nome\"\n              >\n              </input-validations>\n            </div>\n          </div>\n\n          <label for=\"text\" class=\"m-0\" translate>private.users.add.roles</label>\n          <select class=\"w-100\" formControlName=\"roles\" multiple=\"true\" required>\n            <option [value]=\"role.id\" *ngFor=\"let role of roles\">{{ role.name }}</option>\n          </select>\n\n          <div class=\"row justify-content-end mt-4\">\n            <div class=\"col-auto\">\n              <a routerLink=\"/private/users/list\" class=\"btn btn-success btn-lg btn-shadow\">VOLTAR</a>\n            </div>\n            <div class=\"col-auto\">\n              <button type=\"submit\" name=\"saveButton\" class=\"btn btn-primary btn-lg btn-shadow min-100\" translate>SALVAR</button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </section>\n  </div>\n</div>\n","import { DecimalPipe } from '@angular/common';\nimport { HttpParams } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { Observable, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, switchMap } from 'rxjs/operators';\nimport { ESPIM_REST_Users } from 'src/app/app.api';\n\nimport { DAOService } from '../../dao/dao.service';\nimport { User } from '../../models/user.model';\n\n@Component({\n  selector: 'esm-users-list',\n  templateUrl: './list.component.html',\n  providers: [DecimalPipe],\n})\nexport class ListComponent {\n  url: string = ESPIM_REST_Users;\n  users: User[];\n  total: number;\n  loading: boolean = true;\n  page: number = 1;\n  pageSize: 10;\n  search: Subject<string> = new Subject<string>();\n  searchTerm: string = '';\n\n  constructor(private daoService: DAOService) {\n    this.search\n      .pipe(\n        debounceTime(300),\n        distinctUntilChanged(),\n        switchMap(() => {\n          return this.getUsers();\n        })\n      )\n      .subscribe((response) => {\n        this.loading = false;\n        this.setUsers(response);\n      });\n  }\n\n  handleChange($event: any, search: boolean = false): void {\n    if (search) {\n      this.total = null;\n      this.searchTerm = $event;\n      this.page = 1;\n    }\n    this.users = [];\n    this.loading = true;\n    this.search.next($event);\n  }\n\n  ngOnInit() {\n    this.search.next('');\n  }\n\n  getUsers(): Observable<any> {\n    let params = new HttpParams()\n      .set('search', this.searchTerm)\n      .set('page', this.page?.toString())\n      .set('orderBy', 'created_at')\n      .set('sortedBy', 'desc');\n\n    return this.daoService.getObjects(this.url, params);\n  }\n\n  setUsers(response) {\n    this.users = response.data;\n    this.total = response.meta.pagination.total;\n    this.pageSize = response.meta.pagination.per_page;\n  }\n}\n","<main class=\"px-5 mx-auto mt-4 mb-5 card card-lg w-main\">\n  <!--Título & busca-->\n  <div class=\"d-flex justify-content-between align-items-center mb-4\">\n    <h1 class=\"h4\" translate>private.users.list.pageTitle</h1>\n  </div>\n\n  <esm-search (doSearch)=\"handleChange($event, true)\"></esm-search>\n  <form>\n    <!-- Cabeçalho -->\n    <esm-list-header\n      [title]=\"'private.users.list.listTitle' | translate\"\n      [subtitle]=\"'private.users.list.totalNumber' | translate\"\n    ></esm-list-header>\n\n    <div class=\"alert alert-info\" *ngIf=\"!loading && users.length == 0\">Nenhum usuário encontrado</div>\n\n    <table class=\"table table-hover\">\n      <tbody>\n        <tr *ngFor=\"let user of users\">\n          <td scope=\"row\">\n            <a [routerLink]=\"['/private/users/edit', user.id]\">\n              {{ user.name }} <small> - {{ user.email }}</small>\n            </a>\n          </td>\n\n          <td width=\"70\" *ngxPermissionsOnly=\"['USERS_EDIT']\">\n            <div class=\"mx-3 d-flex align-items-center\">\n              <a [routerLink]=\"['/private/users/edit', user.id]\">\n                <i class=\"mr-3 fas fa-edit fa-lg text-primary\"></i>\n              </a>\n            </div>\n          </td>\n        </tr>\n\n        <ng-template [ngIf]=\"loading\">\n          <tr *ngFor=\"let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13]\" class=\"loading\">\n            <td>\n              <div class=\"loader-bg\"></div>\n            </td>\n            <td width=\"100\">\n              <div class=\"loader-bg\"></div>\n            </td>\n          </tr>\n        </ng-template>\n      </tbody>\n    </table>\n\n    <div class=\"p-2\">\n      <pagination\n        [totalItems]=\"total\"\n        *ngIf=\"total\"\n        [(ngModel)]=\"page\"\n        name=\"page\"\n        (pageChanged)=\"handleChange($event)\"\n        [disabled]=\"!total\"\n        [maxSize]=\"15\"\n        [boundaryLinks]=\"true\"\n      ></pagination>\n\n      <div *ngIf=\"total == null\">\n        <div class=\"loader-bg w-25\"></div>\n        <div class=\"loader-bg w-25\"></div>\n        <div class=\"loader-bg w-25\"></div>\n      </div>\n    </div>\n  </form>\n</main>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PermissionsGuard } from 'src/app/security/permissions.guard';\n\nimport { AddComponent } from './add/add.component';\nimport { ListComponent } from './list/list.component';\n\nconst routes: Routes = [\n  {\n    path: 'list',\n    canActivate: [PermissionsGuard],\n    data: {\n      permissions: {\n        only: ['USERS_LIST'],\n      },\n    },\n    component: ListComponent,\n  },\n  {\n    path: 'edit/:id',\n    canActivate: [PermissionsGuard],\n    data: {\n      permissions: {\n        only: ['USERS_EDIT'],\n      },\n    },\n    component: AddComponent,\n  },\n  { path: '**', redirectTo: '/private', pathMatch: 'full' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class UsersRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\nimport { SharedModule } from '../../app.shared.module';\nimport { AddComponent } from './add/add.component';\nimport { ListComponent } from './list/list.component';\nimport { UsersRoutingModule } from './users-routing.module';\n\n// imports from dependencies\n\n@NgModule({\n  imports: [SharedModule, ComponentsModule, UsersRoutingModule, CommonModule],\n  exports: [SharedModule],\n  declarations: [AddComponent, ListComponent],\n})\nexport class UsersModule {}\n"],"sourceRoot":"webpack:///"}
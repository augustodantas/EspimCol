{"version":3,"sources":["./src/app/private/models/permission.model.ts","./src/app/private/roles/add/add.component.ts","./src/app/private/roles/add/add.component.html","./src/app/private/roles/list/list.component.ts","./src/app/private/roles/list/list.component.html","./src/app/private/roles/roles-routing.module.ts","./src/app/private/roles/roles.module.ts"],"names":[],"mappings":"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","file":"roles-roles-module.js","sourcesContent":["export class Permission {\n  id: number;\n  name: string = '';\n  checked: boolean;\n  constructor(event: any = {}) {\n    this.id = event.id;\n    this.name = event.name;\n  }\n}\n","import { Component, ElementRef, OnInit, ViewChild } from '@angular/core';\nimport { FormArray, FormBuilder, FormGroup, Validators } from '@angular/forms';\nimport { ActivatedRoute, Router } from '@angular/router';\nimport { ToastrService } from 'ngx-toastr';\nimport { Observable } from 'rxjs';\nimport { finalize } from 'rxjs/operators';\nimport { ESPIM_REST_Permissions, ESPIM_REST_Roles } from 'src/app/app.api';\nimport { LoaderService } from 'src/app/services/loader.service';\nimport { FormUtil } from 'src/app/util/util.form.service';\n\nimport { DAOService } from '../../dao/dao.service';\nimport { Permission } from '../../models/permission.model';\n\n@Component({\n  selector: 'esm-roles-add',\n  templateUrl: './add.component.html',\n})\nexport class AddComponent implements OnInit {\n  @ViewChild('formElement') formElement: ElementRef;\n\n  url: string = ESPIM_REST_Roles;\n  urlPermissions: string = ESPIM_REST_Permissions;\n  permissions: Permission[] = [];\n  form: FormGroup;\n  editing: boolean = false;\n  loading: boolean = true;\n  id: string = '';\n\n  constructor(\n    private _daoService: DAOService,\n    private _toastr: ToastrService,\n    private _formBuilder: FormBuilder,\n    private _loaderService: LoaderService,\n    private route: Router,\n    private activeRoute: ActivatedRoute\n  ) {}\n\n  ngOnInit() {\n    this.id = this.activeRoute.snapshot.params.id;\n\n    this.form = this._formBuilder.group({\n      name: this._formBuilder.control('', [Validators.required]),\n      permissions: this._formBuilder.array([]),\n    });\n\n    if (this.id) {\n      this.fetchData(this.id);\n    } else {\n      this.loading = false;\n    }\n\n    this.getPermissions();\n  }\n\n  fetchData(id: string) {\n    this._loaderService.show();\n    this._daoService\n      .getObject(this.url, id)\n      .pipe(finalize(() => this._loaderService.hide()))\n      .subscribe((response) => {\n        this.form.patchValue({ ...response.data });\n        response.data.permissions.forEach((it) => this.checkboxHandler(true, new Permission(it)));\n      });\n  }\n\n  save(event) {\n    this.form.markAllAsTouched();\n    let valid = true;\n\n    if (this.form.valid && valid) {\n      this._loaderService.show();\n\n      this.sendRequest()\n        .pipe(finalize(() => this._loaderService.hide()))\n        .subscribe(\n          (response) => {\n            if (response.error) {\n              FormUtil.setErrorsBackend(this.form, response);\n            } else {\n              this._toastr.success(response.message);\n              this.route.navigate(['/private/roles/list']);\n            }\n          },\n          (resp) => FormUtil.setErrorsBackend(this.form, resp.data)\n        );\n    }\n  }\n\n  sendRequest(): Observable<any> {\n    var dados = { ...this.form.value };\n    dados.permissions = this.permissionIdArray;\n\n    if (this.id) {\n      return this._daoService.putObject(this.url + this.id, dados);\n    } else {\n      return this._daoService.postObject(this.url, dados);\n    }\n  }\n\n  checkboxHandler(checked: boolean, permission: Permission) {\n    if (checked) {\n      this.permissionFormArray.push(this._formBuilder.control(permission));\n    } else {\n      let index = this.permissionIdArray.indexOf(permission.id);\n      this.permissionFormArray.removeAt(index);\n    }\n  }\n\n  get permissionIdArray() {\n    return this.permissionFormArray.value.map((permission: Permission) => permission.id);\n  }\n\n  get permissionFormArray() {\n    return this.form.controls.permissions as FormArray;\n  }\n\n  getPermissions(): void {\n    this._daoService.getObjects(this.urlPermissions).subscribe((response) => {\n      this.permissions = response.data;\n    });\n  }\n\n  isChecked(permission: Permission) {\n    return this.permissionFormArray.value.find((value) => value.id == permission.id) ? true : false;\n  }\n}\n","<div class=\"mx-auto mt-4 card card-lg w-main container-fluid\">\n  <div class=\"row\">\n    <section class=\"p-0 mx-auto bg-white rounded col-12 p-xl-2\">\n      <div class=\"container-fluid\">\n        <div class=\"row\">\n          <div class=\"col-12\">\n            <h1 class=\"h4\" translate *ngIf=\"!id\">private.roles.add.title</h1>\n            <h1 class=\"h4\" translate *ngIf=\"id\">private.roles.add.titleEdit</h1>\n          </div>\n        </div>\n\n        <form [formGroup]=\"form\" focusInvalidInput #formElement (ngSubmit)=\"save($event)\">\n          <div class=\"row\">\n            <div class=\"col-6 form-group\">\n              <div class=\"form-label-group\">\n                <input\n                  id=\"name\"\n                  name=\"name\"\n                  type=\"text\"\n                  placeholder=\"{{ 'private.roles.add.name' | translate }}\"\n                  class=\"form-control border-bottom\"\n                  formControlName=\"name\"\n                />\n                <label for=\"text\" translate>private.roles.add.name</label>\n              </div>\n              <input-validations\n                *ngIf=\"form.controls['name'].invalid && form.controls['name'].touched\"\n                [errors]=\"form.controls['name'].errors\"\n                label=\"Nome\"\n              >\n              </input-validations>\n            </div>\n          </div>\n\n          <div class=\"row mb-5\">\n            <div class=\"col-12 form-group\">\n              <h3 class=\"h6\">Permissões</h3>\n              <div class=\"card card-body\">\n                <div class=\"row\">\n                  <div class=\"col-3 d-flex align-items-center overflow-hidden text-nowrap\" *ngFor=\"let permission of permissions\">\n                    <input\n                      type=\"checkbox\"\n                      [id]=\"'permission' + permission.id\"\n                      [checked]=\"isChecked(permission)\"\n                      (click)=\"checkboxHandler($event.target.checked, permission)\"\n                    />\n                    <label class=\"m-0\" [for]=\"'permission' + permission.id\">{{ permission.name }}</label>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          <div class=\"row justify-content-end\">\n            <div class=\"col-auto\">\n              <a routerLink=\"/private/roles/list\" class=\"btn btn-success btn-lg btn-shadow\">VOLTAR</a>\n            </div>\n            <div class=\"col-auto\">\n              <button type=\"submit\" name=\"saveButton\" class=\"btn btn-primary btn-lg btn-shadow min-100\" translate>SALVAR</button>\n            </div>\n          </div>\n        </form>\n      </div>\n    </section>\n  </div>\n</div>\n","import { DecimalPipe } from '@angular/common';\nimport { HttpParams } from '@angular/common/http';\nimport { Component } from '@angular/core';\nimport { ToastrService } from 'ngx-toastr';\nimport { Observable, Subject } from 'rxjs';\nimport { debounceTime, distinctUntilChanged, finalize, switchMap } from 'rxjs/operators';\nimport { ESPIM_REST_Roles } from 'src/app/app.api';\nimport { LoaderService } from 'src/app/services/loader.service';\nimport { SwalService } from 'src/app/services/swal.service';\n\nimport { DAOService } from '../../dao/dao.service';\nimport { Role } from '../../models/role.model';\n\n@Component({\n  selector: 'esm-roles-list',\n  templateUrl: './list.component.html',\n  providers: [DecimalPipe],\n})\nexport class ListComponent {\n  url: string = ESPIM_REST_Roles;\n  roles: Role[];\n  loading: boolean = true;\n  search: Subject<string> = new Subject<string>();\n  searchTerm: string = '';\n\n  constructor(\n    private daoService: DAOService,\n    private _loaderService: LoaderService,\n    private readonly _swalService: SwalService,\n    private _toastr: ToastrService\n  ) {\n    this.search\n      .pipe(\n        debounceTime(300),\n        distinctUntilChanged(),\n        switchMap(() => {\n          return this.getRoles();\n        })\n      )\n      .subscribe((response) => {\n        this.loading = false;\n        this.setRoles(response);\n      });\n  }\n\n  handleChange($event: any, search: boolean = false): void {\n    if (search) {\n      this.searchTerm = $event;\n    }\n    this.roles = [];\n    this.loading = true;\n    this.search.next($event);\n  }\n\n  ngOnInit() {\n    this.search.next('');\n  }\n\n  getRoles(): Observable<any> {\n    let params = new HttpParams().set('search', this.searchTerm).set('orderBy', 'created_at').set('sortedBy', 'desc');\n    return this.daoService.getObjects(this.url, params);\n  }\n\n  setRoles(response) {\n    this.roles = response.data;\n  }\n\n  deleteRole(role: Role) {\n    this._swalService.confirmDelete(role.name, 'grupo').then((result) => {\n      if (result.isConfirmed) {\n        this._loaderService.show();\n        this.daoService\n          .deleteObject(this.url, role.id.toString())\n          .pipe(finalize(() => this._loaderService.hide()))\n          .subscribe((resp) => {\n            this.handleChange(resp);\n            this._toastr.success(resp.message);\n          });\n      }\n    });\n  }\n}\n","<main class=\"px-5 mx-auto mt-4 mb-5 card card-lg w-main\">\n  <!--Título & busca-->\n  <div class=\"d-flex justify-content-between align-items-center mb-4\">\n    <h1 class=\"h4\" translate>private.roles.list.pageTitle</h1>\n    <a [routerLink]=\"['/private/roles/add']\" class=\"btn btn-link align-self-end\" translate *ngxPermissionsOnly=\"['ROLES_ADD']\"\n      >private.roles.list.addButton</a\n    >\n  </div>\n\n  <esm-search (doSearch)=\"handleChange($event, true)\"></esm-search>\n  <form>\n    <!-- Cabeçalho -->\n    <esm-list-header\n      [title]=\"'private.roles.list.listTitle' | translate\"\n      [subtitle]=\"'private.roles.list.totalNumber' | translate\"\n    ></esm-list-header>\n\n    <div class=\"alert alert-info\" *ngIf=\"!loading && roles.length == 0\">Nenhum grupo encontrado</div>\n\n    <table class=\"table table-hover\">\n      <tbody>\n        <tr *ngFor=\"let role of roles\">\n          <td scope=\"row\">\n            <a [routerLink]=\"['/private/roles/edit', role.id]\">\n              {{ role.name }}\n            </a>\n          </td>\n\n          <td width=\"100\" *ngxPermissionsOnly=\"['ROLES_EDIT', 'ROLES_DELETE']\">\n            <div class=\"mx-3 d-flex align-items-center\">\n              <a [routerLink]=\"['/private/roles/edit', role.id]\" *ngxPermissionsOnly=\"['ROLES_EDIT']\">\n                <i class=\"mr-3 fas fa-edit fa-lg text-primary\"></i>\n              </a>\n              <a href=\"javascript:\" *ngxPermissionsOnly=\"['ROLES_DELETE']\">\n                <i class=\"fas fa-trash-alt fa-lg text-primary\" (click)=\"deleteRole(role)\"></i>\n              </a>\n            </div>\n          </td>\n        </tr>\n\n        <ng-template [ngIf]=\"loading\">\n          <tr *ngFor=\"let i of [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\" class=\"loading\">\n            <td>\n              <div class=\"loader-bg\"></div>\n            </td>\n            <td width=\"100\">\n              <div class=\"loader-bg\"></div>\n            </td>\n          </tr>\n        </ng-template>\n      </tbody>\n    </table>\n  </form>\n</main>\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PermissionsGuard } from 'src/app/security/permissions.guard';\n\nimport { AddComponent } from './add/add.component';\nimport { ListComponent } from './list/list.component';\n\nconst routes: Routes = [\n  {\n    path: 'list',\n    canActivate: [PermissionsGuard],\n    data: {\n      permissions: {\n        only: ['ROLES_LIST'],\n      },\n    },\n    component: ListComponent,\n  },\n  {\n    path: 'add',\n    canActivate: [PermissionsGuard],\n    data: {\n      permissions: {\n        only: ['ROLES_ADD'],\n      },\n    },\n    component: AddComponent,\n  },\n  {\n    path: 'edit/:id',\n    canActivate: [PermissionsGuard],\n    data: {\n      permissions: {\n        only: ['ROLES_EDIT'],\n      },\n    },\n    component: AddComponent,\n  },\n  { path: '**', redirectTo: '/private', pathMatch: 'full' },\n];\n\n@NgModule({\n  imports: [RouterModule.forChild(routes)],\n  exports: [RouterModule],\n})\nexport class RolesRoutingModule {}\n","import { CommonModule } from '@angular/common';\nimport { NgModule } from '@angular/core';\nimport { ComponentsModule } from 'src/app/components/components.module';\n\nimport { SharedModule } from '../../app.shared.module';\nimport { AddComponent } from './add/add.component';\nimport { ListComponent } from './list/list.component';\nimport { RolesRoutingModule } from './roles-routing.module';\n\n// imports from dependencies\n\n@NgModule({\n  imports: [SharedModule, ComponentsModule, RolesRoutingModule, CommonModule],\n  exports: [SharedModule],\n  declarations: [AddComponent, ListComponent],\n})\nexport class RolesModule {}\n"],"sourceRoot":"webpack:///"}
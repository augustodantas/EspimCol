(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{hCAm:function(t,e,i){"use strict";i.r(e),i.d(e,"UsersModule",(function(){return Z}));var r=i("ofXK"),n=i("j1ZV"),a=i("Awto"),o=i("tyNb"),s=i("0rl9"),c=i("mrSG"),l=i("tk/3"),b=i("3Pt+"),d=i("2WpN"),u=i("nWBu"),f=i("5dVO"),m=i("eGxY"),p=i("P9qh"),h=i("fXoL"),v=i("qT8p"),g=i("z1GS"),R=i("o8Qb"),Q=i("n8HC"),y=["formElement"];function S(t,e){1&t&&(h.Rb(0,"h1",21),h.Dc(1,"private.users.add.title"),h.Qb())}function w(t,e){1&t&&(h.Rb(0,"h1",21),h.Dc(1,"private.users.add.titleEdit"),h.Qb())}function I(t,e){if(1&t&&h.Mb(0,"input-validations",22),2&t){var i=h.cc();h.ic("errors",i.form.controls.name.errors)}}function z(t,e){if(1&t&&h.Mb(0,"input-validations",22),2&t){var i=h.cc();h.ic("errors",i.form.controls.email.errors)}}function O(t,e){if(1&t&&(h.Rb(0,"option",23),h.Dc(1),h.Qb()),2&t){var i=e.$implicit;h.ic("value",i.id),h.zb(1),h.Ec(i.name)}}var x=function(){function t(t,e,i,r,n,a){this._daoService=t,this._toastr=e,this._formBuilder=i,this._loaderService=r,this.route=n,this.activeRoute=a,this.url=u.q,this.urlRoles=u.p,this.roles=[],this.editing=!1,this.loading=!0,this.id=""}return t.prototype.ngOnInit=function(){this.id=this.activeRoute.snapshot.params.id,this.form=this._formBuilder.group({name:this._formBuilder.control(null,[b.v.required]),email:this._formBuilder.control(null,[b.v.required]),roles:this._formBuilder.control([],[b.v.required])}),this.fetchData(this.id),this.getUsers()},t.prototype.fetchData=function(t){var e=this;this._loaderService.show();var i=(new l.f).set("include","roles");this._daoService.getObject(this.url,t,i).pipe(Object(d.a)((function(){return e._loaderService.hide()}))).subscribe((function(t){t.data.roles=t.data.roles.map((function(t){return t.id})),e.form.patchValue(Object(c.a)({},t.data))}))},t.prototype.save=function(t){var e=this;this.form.markAllAsTouched(),this.form.valid&&(this._loaderService.show(),this.sendRequest().pipe(Object(d.a)((function(){return e._loaderService.hide()}))).subscribe((function(t){t.error?m.a.setErrorsBackend(e.form,t):(e._toastr.success(t.message),e.route.navigate(["/private/users/list"]))}),(function(t){return m.a.setErrorsBackend(e.form,t.data)})))},t.prototype.sendRequest=function(){var t=Object(c.a)({},this.form.value);return this._daoService.putObject(this.url+this.id,t)},t.prototype.getUsers=function(){var t=this;this._daoService.getObjects(this.urlRoles).subscribe((function(e){t.roles=e.data}))},t.\u0275fac=function(e){return new(e||t)(h.Lb(p.a),h.Lb(v.b),h.Lb(b.d),h.Lb(f.a),h.Lb(o.c),h.Lb(o.a))},t.\u0275cmp=h.Fb({type:t,selectors:[["esm-roles-add"]],viewQuery:function(t,e){var i;1&t&&h.Jc(y,!0),2&t&&h.qc(i=h.Zb())&&(e.formElement=i.first)},decls:37,vars:12,consts:[[1,"mx-auto","mt-4","card","card-lg","w-main","container-fluid"],[1,"row"],[1,"p-0","mx-auto","bg-white","rounded","col-12","p-xl-2"],[1,"container-fluid"],[1,"col-12"],["class","h4","translate","",4,"ngIf"],["focusInvalidInput","",3,"formGroup","ngSubmit"],["formElement",""],[1,"col-6","form-group"],[1,"form-label-group"],["id","name","name","name","type","text","formControlName","name",1,"form-control","border-bottom",3,"placeholder"],["for","text","translate",""],["label","Nome",3,"errors",4,"ngIf"],["id","email","name","email","type","text","formControlName","email",1,"form-control","border-bottom",3,"placeholder"],["for","text","translate","",1,"m-0"],["formControlName","roles","multiple","true","required","",1,"w-100"],[3,"value",4,"ngFor","ngForOf"],[1,"row","justify-content-end","mt-4"],[1,"col-auto"],["routerLink","/private/users/list",1,"btn","btn-success","btn-lg","btn-shadow"],["type","submit","name","saveButton","translate","",1,"btn","btn-primary","btn-lg","btn-shadow","min-100"],["translate","",1,"h4"],["label","Nome",3,"errors"],[3,"value"]],template:function(t,e){1&t&&(h.Rb(0,"div",0),h.Rb(1,"div",1),h.Rb(2,"section",2),h.Rb(3,"div",3),h.Rb(4,"div",1),h.Rb(5,"div",4),h.Bc(6,S,2,0,"h1",5),h.Bc(7,w,2,0,"h1",5),h.Qb(),h.Qb(),h.Rb(8,"form",6,7),h.Yb("ngSubmit",(function(t){return e.save(t)})),h.Rb(10,"div",1),h.Rb(11,"div",8),h.Rb(12,"div",9),h.Mb(13,"input",10),h.dc(14,"translate"),h.Rb(15,"label",11),h.Dc(16,"private.users.add.name"),h.Qb(),h.Qb(),h.Bc(17,I,1,1,"input-validations",12),h.Qb(),h.Qb(),h.Rb(18,"div",1),h.Rb(19,"div",8),h.Rb(20,"div",9),h.Mb(21,"input",13),h.dc(22,"translate"),h.Rb(23,"label",11),h.Dc(24,"private.users.add.email"),h.Qb(),h.Qb(),h.Bc(25,z,1,1,"input-validations",12),h.Qb(),h.Qb(),h.Rb(26,"label",14),h.Dc(27,"private.users.add.roles"),h.Qb(),h.Rb(28,"select",15),h.Bc(29,O,2,2,"option",16),h.Qb(),h.Rb(30,"div",17),h.Rb(31,"div",18),h.Rb(32,"a",19),h.Dc(33,"VOLTAR"),h.Qb(),h.Qb(),h.Rb(34,"div",18),h.Rb(35,"button",20),h.Dc(36,"SALVAR"),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Qb(),h.Qb()),2&t&&(h.zb(6),h.ic("ngIf",!e.id),h.zb(1),h.ic("ngIf",e.id),h.zb(1),h.ic("formGroup",e.form),h.zb(5),h.jc("placeholder",h.ec(14,8,"private.users.add.name")),h.zb(4),h.ic("ngIf",e.form.controls.name.invalid&&e.form.controls.name.touched),h.zb(4),h.jc("placeholder",h.ec(22,10,"private.users.add.email")),h.zb(4),h.ic("ngIf",e.form.controls.email.invalid&&e.form.controls.email.touched),h.zb(4),h.ic("ngForOf",e.roles))},directives:[r.l,b.x,b.l,g.a,b.f,b.b,b.k,b.e,R.b,b.u,b.s,r.k,o.e,Q.a,b.o,b.w],pipes:[R.e],encapsulation:2}),t}(),B=i("K9Ia"),_=i("Gi3i"),k=i("ad02"),j=i("15JJ"),M=i("ZJS2"),L=i("kGPy"),D=i("qSrz"),C=i("+1jO");function F(t,e){1&t&&(h.Rb(0,"div",12),h.Dc(1,"Nenhum usu\xe1rio encontrado"),h.Qb())}var q=function(t){return["/private/users/edit",t]};function E(t,e){if(1&t&&(h.Rb(0,"td",16),h.Rb(1,"div",17),h.Rb(2,"a",14),h.Mb(3,"i",18),h.Qb(),h.Qb(),h.Qb()),2&t){var i=h.cc().$implicit;h.zb(2),h.ic("routerLink",h.lc(1,q,i.id))}}var T=function(){return["USERS_EDIT"]};function U(t,e){if(1&t&&(h.Rb(0,"tr"),h.Rb(1,"td",13),h.Rb(2,"a",14),h.Dc(3),h.Rb(4,"small"),h.Dc(5),h.Qb(),h.Qb(),h.Qb(),h.Bc(6,E,4,3,"td",15),h.Qb()),2&t){var i=e.$implicit;h.zb(2),h.ic("routerLink",h.lc(4,q,i.id)),h.zb(1),h.Fc(" ",i.name," "),h.zb(2),h.Fc(" - ",i.email,""),h.zb(1),h.ic("ngxPermissionsOnly",h.kc(6,T))}}function A(t,e){1&t&&(h.Rb(0,"tr",20),h.Rb(1,"td"),h.Mb(2,"div",21),h.Qb(),h.Rb(3,"td",22),h.Mb(4,"div",21),h.Qb(),h.Qb())}var N=function(){return[1,2,3,4,5,6,7,8,9,10,11,12,13]};function J(t,e){1&t&&h.Bc(0,A,5,0,"tr",19),2&t&&h.ic("ngForOf",h.kc(1,N))}function G(t,e){if(1&t){var i=h.Sb();h.Rb(0,"pagination",23),h.Yb("ngModelChange",(function(t){return h.tc(i),h.cc().page=t}))("pageChanged",(function(t){return h.tc(i),h.cc().handleChange(t)})),h.Qb()}if(2&t){var r=h.cc();h.ic("totalItems",r.total)("ngModel",r.page)("disabled",!r.total)("maxSize",15)("boundaryLinks",!0)}}function P(t,e){1&t&&(h.Rb(0,"div"),h.Mb(1,"div",24),h.Mb(2,"div",24),h.Mb(3,"div",24),h.Qb())}var V=[{path:"list",canActivate:[s.a],data:{permissions:{only:["USERS_LIST"]}},component:function(){function t(t){var e=this;this.daoService=t,this.url=u.q,this.loading=!0,this.page=1,this.search=new B.a,this.searchTerm="",this.search.pipe(Object(_.a)(300),Object(k.a)(),Object(j.a)((function(){return e.getUsers()}))).subscribe((function(t){e.loading=!1,e.setUsers(t)}))}return t.prototype.handleChange=function(t,e){void 0===e&&(e=!1),e&&(this.total=null,this.searchTerm=t,this.page=1),this.users=[],this.loading=!0,this.search.next(t)},t.prototype.ngOnInit=function(){this.search.next("")},t.prototype.getUsers=function(){var t,e=(new l.f).set("search",this.searchTerm).set("page",null===(t=this.page)||void 0===t?void 0:t.toString()).set("orderBy","created_at").set("sortedBy","desc");return this.daoService.getObjects(this.url,e)},t.prototype.setUsers=function(t){this.users=t.data,this.total=t.meta.pagination.total,this.pageSize=t.meta.pagination.per_page},t.\u0275fac=function(e){return new(e||t)(h.Lb(p.a))},t.\u0275cmp=h.Fb({type:t,selectors:[["esm-users-list"]],features:[h.yb([r.e])],decls:17,vars:11,consts:[[1,"px-5","mx-auto","mt-4","mb-5","card","card-lg","w-main"],[1,"d-flex","justify-content-between","align-items-center","mb-4"],["translate","",1,"h4"],[3,"doSearch"],[3,"title","subtitle"],["class","alert alert-info",4,"ngIf"],[1,"table","table-hover"],[4,"ngFor","ngForOf"],[3,"ngIf"],[1,"p-2"],["name","page",3,"totalItems","ngModel","disabled","maxSize","boundaryLinks","ngModelChange","pageChanged",4,"ngIf"],[4,"ngIf"],[1,"alert","alert-info"],["scope","row"],[3,"routerLink"],["width","70",4,"ngxPermissionsOnly"],["width","70"],[1,"mx-3","d-flex","align-items-center"],[1,"mr-3","fas","fa-edit","fa-lg","text-primary"],["class","loading",4,"ngFor","ngForOf"],[1,"loading"],[1,"loader-bg"],["width","100"],["name","page",3,"totalItems","ngModel","disabled","maxSize","boundaryLinks","ngModelChange","pageChanged"],[1,"loader-bg","w-25"]],template:function(t,e){1&t&&(h.Rb(0,"main",0),h.Rb(1,"div",1),h.Rb(2,"h1",2),h.Dc(3,"private.users.list.pageTitle"),h.Qb(),h.Qb(),h.Rb(4,"esm-search",3),h.Yb("doSearch",(function(t){return e.handleChange(t,!0)})),h.Qb(),h.Rb(5,"form"),h.Mb(6,"esm-list-header",4),h.dc(7,"translate"),h.dc(8,"translate"),h.Bc(9,F,2,0,"div",5),h.Rb(10,"table",6),h.Rb(11,"tbody"),h.Bc(12,U,7,7,"tr",7),h.Bc(13,J,1,2,"ng-template",8),h.Qb(),h.Qb(),h.Rb(14,"div",9),h.Bc(15,G,1,5,"pagination",10),h.Bc(16,P,4,0,"div",11),h.Qb(),h.Qb(),h.Qb()),2&t&&(h.zb(6),h.ic("title",h.ec(7,7,"private.users.list.listTitle"))("subtitle",h.ec(8,9,"private.users.list.totalNumber")),h.zb(3),h.ic("ngIf",!e.loading&&0==e.users.length),h.zb(3),h.ic("ngForOf",e.users),h.zb(1),h.ic("ngIf",e.loading),h.zb(2),h.ic("ngIf",e.total),h.zb(1),h.ic("ngIf",null==e.total))},directives:[R.b,M.a,b.x,b.l,b.m,L.a,r.l,r.k,o.e,D.a,C.a,b.k,b.n],pipes:[R.e],encapsulation:2}),t}()},{path:"edit/:id",canActivate:[s.a],data:{permissions:{only:["USERS_EDIT"]}},component:x},{path:"**",redirectTo:"/private",pathMatch:"full"}],Y=function(){function t(){}return t.\u0275mod=h.Jb({type:t}),t.\u0275inj=h.Ib({factory:function(e){return new(e||t)},imports:[[o.f.forChild(V)],o.f]}),t}(),Z=function(){function t(){}return t.\u0275mod=h.Jb({type:t}),t.\u0275inj=h.Ib({factory:function(e){return new(e||t)},imports:[[a.a,n.a,Y,r.c],a.a]}),t}()}}]);